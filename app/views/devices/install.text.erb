#!/usr/bin/env bash
# the preceding line instructs this script to run using the bash interpreter

# main function definition
perform_install()
{
  echo 'perform_install. . .'

  # quietly install the "jq" tool so that JSON can be parsed
  sudo apt-get -qq -y install jq > /dev/null

  # create a new device and return the auth_token
  device_auth_token=$(curl -sSL -X POST <%= full_url %>/api/v1/devices)
  echo "auth_token: $device_auth_token"

  # download the client.js file
  download_client_js

  # get the client.js script for the device
  # client_js_script =

  # get a new registration code (using the device auth_token)
  # registration_code = `curl -sSL <%= full_url %>/registrations/create`

  # output the registration information
  # echo 'register using the following code (valid for the next 5 minutes): registration_code
}

# function to download client.js
download_client_js()
{
  echo 'download_client_js. . .'

  # retrieve client.js script

  # save client.js
}

# run the main function
perform_install
